<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="insaManage">
	<select id="seq" resultType="Long">
		SELECT emp_history_seq.NEXTVAL FROM dual
	</select>
	
	
	<insert id="insertEmp" parameterType="com.sp.grooveware.insamanage.InsaManage">
		INSERT INTO emp_reg(emp_name, emp_rrn, emp_email, emp_tel, emp_address, emp_join_date)
		VALUES (#{emp_name}, #{emp_rrn}, #{emp_emal}, 
				#{emp_tel}, #{emp_address}, TO_DATE(#{emp_join_date}, 'YYYY-MM-DD'))
	</insert>
	
	<insert id="insertHistory" parameterType="com.sp.grooveware.insamanage.InsaManage">
		INSERT INTO emp_history(history_no, emp_no, pos_no, pos_startdate, dept_no, dept_startdate)
		VALUES (#{history_no}, emp_seq.CURRVAL, #{pos_no}, 
		TO_DATE(#{pos_startdate}, 'YYYY-MM-DD'), #{dept_no}, 
		TO_DATE(#{dept_startdate}, 'YYYY-MM-DD'))
	</insert>
	
	 
	 <!--  
	<update id="insertInsaManage" parameterType="com.sp.grooveware.insamanage.InsaManage">
		INSERT ALL
		INTO emp_reg(emp_name, emp_rrn, emp_email, emp_tel, emp_address, emp_join_date)
		VALUES (#{emp_name}, #{emp_rrn}, #{emp_email}, 
				#{emp_tel}, #{emp_address}, #{emp_join_date})
		INTO emp_history(history_no, emp_no, pos_no, pos_startdate, dept_no, dept_startdate)
		VALUES (#{history_no}, emp_seq.CURRVAL , #{pos_no}, #{pos_startdate}, #{dept_no}, #{dept_startdate})
		SELECT * FROM dual
	</update>
	-->
	
</mapper>